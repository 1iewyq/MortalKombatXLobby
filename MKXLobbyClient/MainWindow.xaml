<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:av="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="av" x:Class="MKXLobbyClient.MainWindow"
        Title="Mortal Kombat X - Gaming Lobby" Height="450" Width="800"
        WindowStartupLocation="CenterScreen" ResizeMode="CanResize"
        Background="#FF1A0A0A" FontFamily="Segoe UI Black">

    <Window.Resources>
        <FontFamily x:Key="MKFont">Copperplate Gothic Bold</FontFamily>

        <Style TargetType="{x:Type Button}">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="FontFamily" Value="{StaticResource MKFont}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="Gold"/>
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#FFC1272D" Offset="0"/>
                        <GradientStop Color="#B2240909" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" Value="#FFB22222"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3"
                                SnapsToDevicePixels="True"
                                >
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              RecognizesAccessKey="True"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Color="#FFEF5A5A" Offset="0"/>
                                            <GradientStop Color="#FF9B0F0F" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="BorderBrush" Value="Gold"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF6B0A0A"/>
                                <Setter Property="BorderBrush" Value="#FF4B0202"/>
                                <Setter Property="Foreground" Value="LightGoldenrodYellow"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="#FF555555"/>
                                <Setter Property="Background" Value="#FF2A2A2A"/>
                                <Setter Property="BorderBrush" Value="#FF3A3A3A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Background" Value="#FF240909"/>
            <Setter Property="Foreground" Value="Gold"/>
            <Setter Property="BorderBrush" Value="#FFB22222"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontFamily" Value="{StaticResource MKFont}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="CaretBrush" Value="Gold"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="Gold"/>
                    <Setter Property="Background" Value="#FF3A0D0D"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Foreground" Value="#FF555555"/>
                    <Setter Property="Background" Value="#FF1A0A0A"/>
                    <Setter Property="BorderBrush" Value="#FF3A3A3A"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="{x:Type ListBox}">
            <Style.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FFB22222"/>
                <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="#FF7B0A0F"/>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Gold"/>
            </Style.Resources>
            <Setter Property="Background" Value="#FF240909"/>
            <Setter Property="Foreground" Value="Gold"/>
            <Setter Property="BorderBrush" Value="#FFB22222"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontFamily" Value="{StaticResource MKFont}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBox}">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                SnapsToDevicePixels="True">
                            <ScrollViewer Focusable="False" Padding="{TemplateBinding Padding}">
                                <ItemsPresenter />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type GroupBox}">
            <Setter Property="Foreground" Value="Gold"/>
            <Setter Property="FontFamily" Value="{StaticResource MKFont}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type GroupBox}">
                        <Grid>
                            <Border Background="#B2240909" BorderBrush="#FFB22222" BorderThickness="2" CornerRadius="5"/>
                            <DockPanel>
                                <TextBlock Text="{TemplateBinding Header}" 
                                           Foreground="Gold" FontWeight="Bold" FontSize="14" 
                                           FontFamily="{StaticResource MKFont}"
                                           Background="#FF7B0A0F" Padding="4" Margin="5" 
                                           DockPanel.Dock="Top" 
                                           HorizontalAlignment="Left"
                                           TextOptions.TextFormattingMode="Display"/>
                                <ContentPresenter Margin="5" />
                            </DockPanel>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type TextBlock}" x:Key="GoldTextBlock">
            <Setter Property="Foreground" Value="Gold"/>
            <Setter Property="FontFamily" Value="{StaticResource MKFont}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="TextOptions.TextFormattingMode" Value="Display"/>
        </Style>

    </Window.Resources>

    <Grid>
        <Grid.Background>
            <ImageBrush ImageSource="/Resources/thumb-1920-514625.jpg"/>
        </Grid.Background>
        <!--    =-->
        <Grid x:Name="LoginPanel" Visibility="Visible">
            <Grid.Background>
                <ImageBrush ImageSource="/wallpaper.jpg" Stretch="UniformToFill" Opacity="0.8"/>
            </Grid.Background>
            <StackPanel HorizontalAlignment="Left" VerticalAlignment="Center" Margin="480,0,0,0" Width="280">

                <TextBlock Text="Welcome, Warrior! Prepare to battle in the chat arena."
                           FontSize="14" FontWeight="SemiBold"
                           Foreground="Gold" HorizontalAlignment="Center" Margin="0,0,0,25"
                           FontFamily="Copperplate Gothic Bold" TextWrapping="Wrap" TextAlignment="Center"/>

                <TextBlock Text="Enter Username:" Style="{StaticResource GoldTextBlock}" Margin="5" FontSize="16"/>
                <TextBox x:Name="txtUsername" Width="260" Height="34" FontSize="16"/>

                <Button x:Name="btnLogin" 
                        Content="LOGIN" 
                        Height="40" 
                        Margin="0,15,0,0" 
                        VerticalAlignment="Top" 
                        Width="120"
                        Foreground="Gold"
                        FontSize="18"
                        BorderThickness="0"
                        Click="BtnLogin_Click"/>

                <TextBlock x:Name="lblLoginStatus" Foreground="Red" 
                           HorizontalAlignment="Center" Margin="0,10,0,0" FontWeight="Bold"/>
            </StackPanel>
        </Grid>

        <!-- Main Lobby Panel -->
        <Grid x:Name="MainLobbyPanel" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#B2240909" Margin="5" Height="50" VerticalAlignment="Center">
                <TextBlock x:Name="lblWelcome" Text="Welcome, Player!" 
                          Foreground="Gold" FontWeight="Bold" FontSize="20"
                          VerticalAlignment="Center" Margin="15,0"/>
                <Button x:Name="btnLogout" Content="Logout" 
                       Click="BtnLogout_Click" HorizontalAlignment="Right" 
                       Margin="0,0,15,0" Width="100" Height="30"/>
            </StackPanel>

            <!-- Content Area -->
            <TabControl Grid.Row="1" Background="#B21A0A0A" Margin="5"
                        FontFamily="{StaticResource MKFont}" FontWeight="Bold" FontSize="14" Foreground="Gold">
                <!-- Lobby Rooms Tab -->
                <TabItem Header="Lobby Rooms" Foreground="Gold" Background="#FF240909">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Available Rooms -->
                        <GroupBox Grid.Column="0" Header="Available Rooms" >
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <ListBox x:Name="lstRooms" Grid.Row="0" Margin="5" Background="#B2240909" />

                                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button x:Name="btnRefreshRooms" Content="Refresh" Width="90" Click="BtnRefreshRooms_Click"/>
                                    <Button x:Name="btnJoinRoom" Content="Join Room" Width="90" Margin="10,0,0,0" Click="BtnJoinRoom_Click"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <!-- Create New Room -->
                        <GroupBox Grid.Column="1" Header="Create Room">
                            <StackPanel>
                                <TextBlock Text="Room Name:" Margin="5" FontSize="14"/>
                                <TextBox x:Name="txtNewRoomName" Margin="5" FontSize="14" Background="#B2240909"/>
                                <Button x:Name="btnCreateRoom" Content="Create Room" 
                                       Click="BtnCreateRoom_Click" Margin="5" Width="120" HorizontalAlignment="Left"/>
                                <TextBlock x:Name="lblRoomStatus" Foreground="Red" TextWrapping="Wrap" Margin="5"/>
                            </StackPanel>
                        </GroupBox>
                    </Grid>
                </TabItem>

            </TabControl>
        </Grid>

        <Grid x:Name="RoomChatPanel" Visibility="Collapsed">
            <Grid.Background>
                <ImageBrush/>
            </Grid.Background>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Room Header -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#B2240909" Margin="5" Height="50" VerticalAlignment="Center">
                <TextBlock x:Name="lblCurrentRoom" Text="Room: " 
                          Foreground="Gold" FontWeight="Bold" FontSize="18"
                          VerticalAlignment="Center" Margin="15,0"/>
                <Button x:Name="btnLeaveRoom" Content="Leave Room" 
                       Click="BtnLeaveRoom_Click" HorizontalAlignment="Right" Margin="10,0" Width="110" Height="30"/>
            </StackPanel>

            <!-- Chat Area -->
            <Grid Grid.Row="1" Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Messages and Files -->
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="2*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Chat Messages -->
                    <GroupBox Grid.Row="0" Header="Chat" Margin="5,5,4,41">
                        <ScrollViewer x:Name="chatScrollViewer" VerticalScrollBarVisibility="Auto" Background="#B21A0A0A">
                            <TextBlock x:Name="txtChatMessages" 
                                      TextWrapping="Wrap" Foreground="Gold" 
                                      Background="Transparent" Margin="5" FontFamily="{StaticResource MKFont}" FontWeight="Bold"/>
                        </ScrollViewer>
                    </GroupBox>

                    <!-- Shared Files -->
                    <GroupBox Header="Shared Files" Height="125" Margin="5,158,4,0" VerticalAlignment="Top" Grid.RowSpan="2">
                        <Grid Margin="0,0,0,7">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <ListBox x:Name="lstSharedFiles" Grid.Row="0" Margin="5,-6,6,24" 
                                    MouseDoubleClick="LstSharedFiles_MouseDoubleClick" Grid.RowSpan="2" Background="#B2240909"/>
                            <Button x:Name="btnShareFile" Grid.Row="1" Content="Share File" 
                                   Click="BtnShareFile_Click" Margin="227,8,226,2" Width="120"/>
                        </Grid>
                    </GroupBox>
                </Grid>

                <!-- Players List -->
                <GroupBox Grid.Column="1" Header="Players">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <ListBox x:Name="lstPlayers" Grid.Row="0" Margin="5" 
                                MouseDoubleClick="LstPlayers_MouseDoubleClick" Background="#B2240909"/>
                        <Button x:Name="btnRefreshPlayers" Grid.Row="1" Content="Refresh" 
                               Click="BtnRefreshPlayers_Click" Margin="5" Width="90"/>
                    </Grid>
                </GroupBox>
            </Grid>

            <!-- Message Input -->
            <Grid Grid.Row="2" Margin="5,5,5,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="55*"/>
                    <ColumnDefinition Width="284*"/>
                    <ColumnDefinition Width="16*"/>
                    <ColumnDefinition Width="360*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox x:Name="txtMessageInput" Grid.Column="0" 
                         KeyDown="TxtMessageInput_KeyDown" Height="34" FontSize="14" Grid.ColumnSpan="4" Margin="5,5,5,5" Background="#B2240909"/>

                <Button x:Name="btnSendMessage" Grid.Column="4" Content="Send" 
                       Click="BtnSendMessage_Click" Width="70" Height="34" Margin="5,5,0,5"/>
            </Grid>
        </Grid>
    </Grid>
</Window>